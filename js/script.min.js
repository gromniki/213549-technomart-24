"use strict";var btnShowFeedback=document.querySelector(".js-btn-show-modal-feedback"),feedbackPopup=document.querySelector(".modal-feedback"),form=feedbackPopup.querySelector(".modal-form"),nameField=feedbackPopup.querySelector("[name=name]"),emailField=feedbackPopup.querySelector("[name=email]"),commentField=feedbackPopup.querySelector("[name=text]"),isStorageSupport=!0,storageName="",storageEmail="",btnMap=document.querySelector(".js-btn-show-modal-map"),mapPopup=document.querySelector(".modal-map"),btnAdded2Cart=document.querySelectorAll(".btn-buy"),modalAdded2Cart=document.querySelector(".modal-added-product"),popupClose=document.querySelectorAll(".modal-close"),btnPrev=document.querySelector(".js-slide-prev"),btnNext=document.querySelector(".js-slide-next"),toggle=document.querySelectorAll("input[name=toggle]");function changeSlide(e,t){for(var a=0,o=0;o<e.length;o++)e[o].checked&&(a=o,"next"==t&&o<e.length-1&&a++,"prev"==t&&0<o&&a--);e[a].checked=!0}btnPrev.addEventListener("click",function(e){e.preventDefault(),changeSlide(toggle,"prev")}),btnNext.addEventListener("click",function(e){e.preventDefault(),changeSlide(toggle,"next")});try{storageName=localStorage.getItem("name"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}btnShowFeedback.addEventListener("click",function(e){e.preventDefault(),feedbackPopup.classList.add("modal-show"),storageName&&!emailField?(nameField.value=storageName,emailField.focus()):storageEmail&&storageName?(nameField.value=storageName,emailField.value=storageEmail,commentField.focus()):nameField.focus()}),form.addEventListener("submit",function(e){nameField.value&&emailField.value&&commentField.value?isStorageSupport&&(localStorage.setItem("name",nameField.value),localStorage.setItem("email",emailField.value)):(e.preventDefault(),feedbackPopup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),feedbackPopup.classList.contains("modal-show")&&(feedbackPopup.classList.remove("modal-show"),feedbackPopup.classList.remove("modal-error")))}),btnMap.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal-show")});for(var i=0;i<popupClose.length;i++)popupClose[i].addEventListener("click",function(e){e.preventDefault(),this.parentNode.classList.remove("modal-show"),this.parentNode.classList.remove("modal-error"),console.log("Закрыл элемент "+this.parentNode.className)});for(var b=0;b<btnAdded2Cart.length;b++)btnAdded2Cart[b].addEventListener("click",function(e){e.preventDefault(),modalAdded2Cart.classList.add("modal-show")});